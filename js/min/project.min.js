var api_project="api/project.php";$(document).ready(function(){function e(){$(".edit-menu").hide()}var o,t;autosize($("textarea")),$dialogForm=$("#dialogForm"),$btnClose=$dialogForm.children(".topic").children(".btn-close-dialog"),$btnCreate=$("#btnCreate"),$btnSubmit=$("#btnSubmit"),$formProgress=$("#formProgress"),$nameinput=$("#name"),$btnSave=$("#btnSave"),$btnSave.click(function(){$btnSave.addClass("loading");var e=$("#project_id").val(),o=$("#project_name").val(),t=$("#project_desc").val();$progressbar.fadeIn(300),$progressbar.width("0%"),$.ajax({url:api_project,cache:!1,dataType:"json",type:"POST",data:{request:"edit",project_id:e,project_name:o,project_desc:t},error:function(e){console.log("Request Error",e.responseText)}}).done(function(o){console.log(o),$progressbar.animate({width:"100%"},500),$progressbar.fadeOut(function(){setTimeout(function(){window.location="project/"+e},1e3)})})}),$dialogForm.ajaxForm({beforeSubmit:function(){$formProgress.fadeIn(100),$formProgress.width("0%"),$btnSubmit.prop("disabled",!0),$btnSubmit.addClass("loading"),$btnSubmit.html("กำลังบันทึก")},uploadProgress:function(e,o,t,n){var r=n;r=80*r/100,$formProgress.animate({width:r+"%"},100)},success:function(){$formProgress.animate({width:"90%"},300)},complete:function(e){$formProgress.animate({width:"100%"},300),console.log(e.responseText),console.log(e.responseJSON),setTimeout(function(){location.reload()},1e3)}}),$btnCreate.click(function(){$dialogForm.addClass("open"),$overlay.addClass("open")}),$btnClose.click(function(){$dialogForm.removeClass("open"),$overlay.removeClass("open"),$("#project_id").val(""),$("#name").val(""),$("#desc").val(""),$("#url").val("")}),$(".edit").click(function(n){n.stopPropagation(),o=$(this).parent().attr("data-id"),t=$(this).parent().children(".detail").children("h2").html(),e(),$submenu=$(this).children(".edit-menu"),$submenu.show()}),$(".btn-delete").click(function(){return confirm('คุณต้องการลบ "'+t+'"ใช่หรือไม่ ?')?($.ajax({url:api_project,cache:!1,dataType:"json",type:"POST",data:{request:"delete",project_id:o},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),location.reload()}),void 0):!1}),$(document).click(function(o){$(o.target).closest(".edit-menu").length&&$(o.target).closest(".category-menu").length||e()})});