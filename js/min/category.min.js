var api_category="api/category.php";$(document).ready(function(){$categoryFormDialog=$("#categoryFormDialog"),$btnCloseCategoryForm=$("#btnCloseCategoryForm"),$btnSaveCategory=$("#btnSaveCategory"),$btnDeleteCategory=$("#btnDeleteCategory"),$btnCreateCategory=$("#btnCreateCategory"),$btnCreateCategory.click(function(){var e=$("#new_category_name").val();return e?($progressbar.fadeIn(300),$progressbar.width("0%"),$progressbar.animate({width:"70%"},500),$.get({url:api_category,cache:!1,dataType:"json",type:"POST",data:{request:"create",name:e},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),$progressbar.animate({width:"100%"},200),setTimeout(function(){location.reload()},1e3)}),void 0):!1}),$(".btn-edit-category").click(function(){var e=$(this).parent().attr("data-id");$.get({url:api_category,cache:!1,dataType:"json",type:"GET",data:{request:"get",category_id:e},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),$("#category_id").val(e.dataset.id),$("#category_name").val(e.dataset.name),$overlay.addClass("open"),$categoryFormDialog.addClass("open")})}),$btnCloseCategoryForm.click(function(){$overlay.removeClass("open"),$categoryFormDialog.removeClass("open"),$("#category_id").val(""),$("#category_name").val("")}),$btnSaveCategory.click(function(){var e=$("#category_id").val(),o=$("#category_name").val();return e&&o?($progressbar.fadeIn(300),$progressbar.width("0%"),$progressbar.animate({width:"70%"},500),$btnSaveCategory.html("กำลังแก้ไข..."),$.get({url:api_category,cache:!1,dataType:"json",type:"POST",data:{request:"edit",category_id:e,category_name:o},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),$progressbar.animate({width:"100%"},200),setTimeout(function(){location.reload()},1e3)}),void 0):!1}),$btnDeleteCategory.click(function(){var e=$("#category_id").val(),o=$("#category_name").val();return e&&o?confirm('คุณต้องการลบ "'+o+'"ใช่หรือไม่ ?')?($progressbar.fadeIn(300),$progressbar.width("0%"),$progressbar.animate({width:"70%"},500),$btnDeleteCategory.html("รอสักครู่..."),$.get({url:api_category,cache:!1,dataType:"json",type:"POST",data:{request:"delete",category_id:e},error:function(e){console.log("Request Error",e.responseText)}}).done(function(e){console.log(e),$progressbar.animate({width:"100%"},200),setTimeout(function(){location.reload()},1e3)}),void 0):!1:!1})});